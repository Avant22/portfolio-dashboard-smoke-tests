# Portfolio Dashboard Smoke Tests

A minimal smoke-test suite for a fictional portfolio dashboard, covering API, UI, and database checks.

## Stack
- Python
- Pytest
- Playwright
- Requests
- JSONSchema
- SQLite/SQL
- pytest-html
- GitHub Actions

## Project Structure
```
.
├── config.py
├── requirements.txt
├── pytest.ini
├── tests
│   ├── api
│   │   ├── schemas
│   │   │   └── portfolio_summary_schema.json
│   │   └── test_portfolio_api.py
│   ├── ui
│   │   └── test_portfolio_ui.py
│   └── db
│       └── test_user_db.py
├── db
│   ├── init_db.sql
│   ├── qa_demo.db (generated by setup_db.py)
│   └── setup_db.py
├── postman
├── reports
│   └── report.html
└── .github
    └── workflows
        └── tests.yml
```

## Setup
1) Create and activate a virtual environment
```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\\Scripts\\activate
```

2) Install dependencies
```bash
pip install -r requirements.txt
```

3) Install Playwright browser
```bash
python -m playwright install chromium
```

4) Seed the SQLite database
```bash
python db/setup_db.py
```

## Running Tests
- All tests: `pytest`
- Only API tests: `pytest -m api`
- Only UI tests: `pytest -m ui`
- Only DB tests: `pytest -m db`

HTML report is generated at `reports/report.html`.

## What Each Layer Validates
- API: Ensures HTTP 200 and the response contract via JSON Schema.
- UI: Verifies login flow and that dashboard inventory items are visible.
- DB: Confirms the test user and portfolio positions exist in the database.

## Continuous Integration
GitHub Actions workflow (`.github/workflows/tests.yml`) installs dependencies, sets up Playwright, seeds the SQLite database, runs pytest, and uploads the HTML report as an artifact.

## Extending this Project
- Add more endpoints and contract checks for the portfolio API.
- Include negative tests for authentication and validation.
- Capture screenshots on UI test failures.
- Introduce environment-specific configuration profiles.
